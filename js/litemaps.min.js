(function(a){Drupal.behaviors.litemaps={attach:function(b,c){Drupal.litemaps.init(b,c)}};Drupal.litemaps={};Drupal.litemaps={init:function(b,c){if(typeof c.litemaps!="undefined"){a.each(c.litemaps,function(e,f){var d=f.map_id;a("#"+d+":not(.litemaps-processed)",b).each(function(){a(this).litemaps(f);if(f.picker){var l=a(this).parents("form");var g=a(this).parents("fieldset");a(this).wrap('<div class="picker" />');a(this).addClass("pickerk-map");a(this).before('<div class="pickerk-input"><div class="form-item"><input id="'+d+'-search" type="text" size="50" class="form-text"></div><div class="form-item"><input type="radio" name="type" id="'+d+'-changetype-all" checked="checked" class="form-radio"> <label for="'+d+'-changetype-all" class="option">'+Drupal.t("All")+'</label></div><div class="form-item"><input type="radio" name="type" id="'+d+'-changetype-establishment" class="form-radio"> <label for="'+d+'-changetype-establishment" class="option">'+Drupal.t("Establishments")+'</label></div><div class="form-item"><input type="radio" name="type" id="'+d+'-changetype-geocode" class="form-radio"> <label for="'+d+'-changetype-geocode" class="option">'+Drupal.t("Geocodes")+"</label></div></div>");var i=document.getElementById(d+"-search");var k=new google.maps.places.Autocomplete(i);var n=a(this).data("litemaps_map");k.bindTo("bounds",n);var m=new google.maps.InfoWindow();var h=new google.maps.Marker({map:n,icon:"https://chart.googleapis.com/chart?chst=d_map_pin_letter_withshadow&chld=|0000FF|"});google.maps.event.addListener(h,"position_changed",function(){a(".litemaps_point_picker-latitude",g).val(h.getPosition().lat());a(".litemaps_point_picker-longitude",g).val(h.getPosition().lng())});google.maps.event.addListener(n,"click",function(o){m.close();h.setPosition(o.latLng)});google.maps.event.addListener(k,"place_changed",function(){m.close();var p=k.getPlace();if(p.geometry.viewport){n.fitBounds(p.geometry.viewport)}else{n.setCenter(p.geometry.location);n.setZoom(17)}h.setPosition(p.geometry.location);var o="";if(p.address_components){o=[(p.address_components[0]&&p.address_components[0].short_name||""),(p.address_components[1]&&p.address_components[1].short_name||""),(p.address_components[2]&&p.address_components[2].short_name||"")].join(" ")}m.setContent("<div><b>"+p.name+"</b><br>"+o);m.open(n,h)});var j=function(q,o){var p=document.getElementById(q);google.maps.event.addDomListener(p,"click",function(){k.setTypes(o)})};j(d+"-changetype-all",[]);j(d+"-changetype-establishment",["establishment"]);j(d+"-changetype-geocode",["geocode"])}}).addClass("litemaps-processed")})}}}}(jQuery));